÷
LC:\Users\danse\source\repos\FEIService\FEIService\Properties\AssemblyInfo.cs
[ 
assembly 	
:	 

AssemblyTitle 
( 
$str %
)% &
]& '
[		 
assembly		 	
:			 

AssemblyDescription		 
(		 
$str		 !
)		! "
]		" #
[

 
assembly

 	
:

	 
!
AssemblyConfiguration

  
(

  !
$str

! #
)

# $
]

$ %
[ 
assembly 	
:	 

AssemblyCompany 
( 
$str 
) 
] 
[ 
assembly 	
:	 

AssemblyProduct 
( 
$str '
)' (
]( )
[ 
assembly 	
:	 

AssemblyCopyright 
( 
$str 0
)0 1
]1 2
[ 
assembly 	
:	 

AssemblyTrademark 
( 
$str 
)  
]  !
[ 
assembly 	
:	 

AssemblyCulture 
( 
$str 
) 
] 
[ 
assembly 	
:	 


ComVisible 
( 
false 
) 
] 
[ 
assembly 	
:	 

Guid 
( 
$str 6
)6 7
]7 8
[## 
assembly## 	
:##	 

AssemblyVersion## 
(## 
$str## $
)##$ %
]##% &
[$$ 
assembly$$ 	
:$$	 

AssemblyFileVersion$$ 
($$ 
$str$$ (
)$$( )
]$$) *—
<C:\Users\danse\source\repos\FEIService\FEIService\Program.cs
	namespace 	

FEIService
 
{ 
public		 

class		 
Program		 
{

 
static 
void 
Main 
( 
string 
[  
]  !
args" &
)& '
{ 	
} 	
} 
} »æ
DC:\Users\danse\source\repos\FEIService\FEIService\Implementations.cs
	namespace 	
Service
 
{ 
public 

partial 
class 
Implementations (
:) *
IViewStudentInfo+ ;
{ 
public 
Domain 
. 
ViewStudentInfo %
LogIn& +
(+ ,
string, 2
	studentId3 <
,< =
string> D
passwordE M
)M N
{ 	
Domain 
. 
ViewStudentInfo "
studentInfo# .
=/ 0
null1 5
;5 6
using 
( 
FEIDBEntities  
context! (
=) *
new+ .
FEIDBEntities/ <
(< =
)= >
)> ?
{   
try!! 
{"" 
var## 
foundStudent## $
=##% &
context##' .
.##. /
ViewStudents##/ ;
.##; <
Where##< A
(##A B
x##B C
=>##D F
x##G H
.##H I
	IdStudent##I R
==##S U
	studentId##V _
)##_ `
.##` a
FirstOrDefault##a o
(##o p
)##p q
;##q r
if$$ 
($$ 
foundStudent$$ $
!=$$% '
null$$( ,
)$$, -
{%% 
var&& 
	foundUser&& %
=&&& '
context&&( /
.&&/ 0
Users&&0 5
.&&5 6
Where&&6 ;
(&&; <
x&&< =
=>&&> @
x&&A B
.&&B C
IdUser&&C I
==&&J L
foundStudent&&M Y
.&&Y Z
IdUser&&Z `
)&&` a
.&&a b
FirstOrDefault&&b p
(&&p q
)&&q r
;&&r s
if'' 
('' 
	foundUser'' %
.''% &
Password''& .
!=''/ 1
null''2 6
)''6 7
{(( 
if)) 
())  
	foundUser))  )
.))) *
Password))* 2
==))3 5
password))6 >
)))> ?
{** 
studentInfo++  +
=++, -
new++. 1
Domain++2 8
.++8 9
ViewStudentInfo++9 H
(++H I
)++I J
;++J K
studentInfo,,  +
.,,+ ,
fullName,,, 4
=,,5 6
foundStudent,,7 C
.,,C D
FullName,,D L
;,,L M
studentInfo--  +
.--+ ,
idCareer--, 4
=--5 6
foundStudent--7 C
.--C D
IdCareer--D L
;--L M
studentInfo..  +
...+ ,
idTutor.., 3
=..4 5
foundStudent..6 B
...B C
IdTutor..C J
;..J K
studentInfo//  +
.//+ ,
	idStudent//, 5
=//6 7
foundStudent//8 D
.//D E
	IdStudent//E N
;//N O
studentInfo00  +
.00+ ,

careerName00, 6
=007 8
foundStudent009 E
.00E F

CareerName00F P
;00P Q
studentInfo11  +
.11+ ,
	tutorName11, 5
=116 7
foundStudent118 D
.11D E
Name11E I
;11I J
}22 
}33 
}44 
}55 
catch66 
(66 
EntityException66 &
ex66' )
)66) *
{77 
Console88 
.88 
	WriteLine88 %
(88% &
ex88& (
.88( )
Message88) 0
)880 1
;881 2
}99 
catch:: 
(:: 
	Exception::  
ex::! #
)::# $
{;; 
Console<< 
.<< 
	WriteLine<< %
(<<% &
ex<<& (
.<<( )
Message<<) 0
)<<0 1
;<<1 2
}== 
}>> 
return?? 
studentInfo?? 
;?? 
}@@ 	
}AA 
publicFF 

partialFF 
classFF 
ImplementationsFF (
:FF) *
ITutorFF+ 1
{GG 
publicMM 
DomainMM 
.MM 
TutorMM 
GetTutorByIdMM (
(MM( )
intMM) ,
idTutorMM- 4
)MM4 5
{NN 	
DomainOO 
.OO 
TutorOO 
tutorOO 
=OO  
nullOO! %
;OO% &
usingPP 
(PP 
FEIDBEntitiesPP  
contextPP! (
=PP) *
newPP+ .
FEIDBEntitiesPP/ <
(PP< =
)PP= >
)PP> ?
{QQ 
tryRR 
{SS 
varTT 

foundTutorTT "
=TT# $
contextTT% ,
.TT, -
TutorsTT- 3
.TT3 4
WhereTT4 9
(TT9 :
xTT: ;
=>TT< >
xTT? @
.TT@ A
IdTutorTTA H
==TTI K
idTutorTTL S
)TTS T
.TTT U
FirstOrDefaultTTU c
(TTc d
)TTd e
;TTe f
tutorUU 
=UU 
newUU 
DomainUU  &
.UU& '
TutorUU' ,
(UU, -
)UU- .
{VV 
idTutorWW 
=WW  !

foundTutorWW" ,
.WW, -
IdTutorWW- 4
,WW4 5
fullNameXX  
=XX! "

foundTutorXX# -
.XX- .
NameXX. 2
,XX2 3
}YY 
;YY 
}[[ 
catch\\ 
(\\ 
EntityException\\ &
ex\\' )
)\\) *
{]] 
Console^^ 
.^^ 
	WriteLine^^ %
(^^% &
ex^^& (
.^^( )
Message^^) 0
)^^0 1
;^^1 2
}__ 
catch`` 
(`` 
	Exception``  
ex``! #
)``# $
{aa 
Consolebb 
.bb 
	WriteLinebb %
(bb% &
exbb& (
.bb( )
Messagebb) 0
)bb0 1
;bb1 2
}cc 
}ee 
returnff 
tutorff 
;ff 
}gg 	
publicmm 
Listmm 
<mm 
Domainmm 
.mm 
Tutormm  
>mm  !
GetTutorsListmm" /
(mm/ 0
)mm0 1
{nn 	
Listoo 
<oo 
Domainoo 
.oo 
Tutoroo 
>oo 
	tutorListoo (
=oo) *
newoo+ .
Listoo/ 3
<oo3 4
Domainoo4 :
.oo: ;
Tutoroo; @
>oo@ A
(ooA B
)ooB C
;ooC D
usingqq 
(qq 
FEIDBEntitiesqq  
contextqq! (
=qq) *
newqq+ .
FEIDBEntitiesqq/ <
(qq< =
)qq= >
)qq> ?
{rr 
tryss 
{tt 
varuu 
foundTutorListuu &
=uu' (
contextuu) 0
.uu0 1
Tutorsuu1 7
.uu7 8
ToListuu8 >
(uu> ?
)uu? @
;uu@ A
foreachvv 
(vv 
varvv  
tutorvv! &
invv' )
foundTutorListvv* 8
)vv8 9
{ww 
Domainxx 
.xx 
Tutorxx $
	tutorInfoxx% .
=xx/ 0
newxx1 4
Domainxx5 ;
.xx; <
Tutorxx< A
(xxA B
)xxB C
{yy 
idTutorzz #
=zz$ %
tutorzz& +
.zz+ ,
IdTutorzz, 3
,zz3 4
fullName{{ $
={{% &
tutor{{' ,
.{{, -
Name{{- 1
}}} 
;}} 
	tutorList !
.! "
Add" %
(% &
	tutorInfo& /
)/ 0
;0 1
}
€€ 
}
 
catch
‚‚ 
(
‚‚ 
EntityException
‚‚ &
ex
‚‚' )
)
‚‚) *
{
ƒƒ 
Console
„„ 
.
„„ 
	WriteLine
„„ %
(
„„% &
ex
„„& (
.
„„( )
Message
„„) 0
)
„„0 1
;
„„1 2
}
…… 
catch
†† 
(
†† 
	Exception
††  
ex
††! #
)
††# $
{
‡‡ 
Console
ˆˆ 
.
ˆˆ 
	WriteLine
ˆˆ %
(
ˆˆ% &
ex
ˆˆ& (
.
ˆˆ( )
Message
ˆˆ) 0
)
ˆˆ0 1
;
ˆˆ1 2
}
‰‰ 
}
‹‹ 
return
 
	tutorList
 
;
 
}
 	
}
 
public
”” 

partial
”” 
class
”” 
Implementations
”” (
:
””) *
ICareer
””+ 2
{
•• 
public
šš 
List
šš 
<
šš 
Domain
šš 
.
šš 
Career
šš !
>
šš! "
GetCareerList
šš# 0
(
šš0 1
)
šš1 2
{
›› 	
List
œœ 
<
œœ 
Domain
œœ 
.
œœ 
Career
œœ 
>
œœ 

careerList
œœ  *
=
œœ+ ,
new
œœ- 0
List
œœ1 5
<
œœ5 6
Domain
œœ6 <
.
œœ< =
Career
œœ= C
>
œœC D
(
œœD E
)
œœE F
;
œœF G
using
 
(
 
FEIDBEntities
  
context
! (
=
) *
new
+ .
FEIDBEntities
/ <
(
< =
)
= >
)
> ?
{
 
try
ŸŸ 
{
   
var
¡¡ 
foundCareerList
¡¡ '
=
¡¡( )
context
¡¡* 1
.
¡¡1 2
Careers
¡¡2 9
.
¡¡9 :
ToList
¡¡: @
(
¡¡@ A
)
¡¡A B
;
¡¡B C
foreach
¢¢ 
(
¢¢ 
var
¢¢  
career
¢¢! '
in
¢¢( *
foundCareerList
¢¢+ :
)
¢¢: ;
{
££ 
Domain
¤¤ 
.
¤¤ 
Career
¤¤ %

careerInfo
¤¤& 0
=
¤¤1 2
new
¤¤3 6
Domain
¤¤7 =
.
¤¤= >
Career
¤¤> D
(
¤¤D E
)
¤¤E F
{
¥¥ 
idCareer
¦¦ $
=
¦¦% &
career
¦¦' -
.
¦¦- .
IdCareer
¦¦. 6
,
¦¦6 7
name
§§  
=
§§! "
career
§§# )
.
§§) *

CareerName
§§* 4
}
¨¨ 
;
¨¨ 

careerList
©© "
.
©©" #
Add
©©# &
(
©©& '

careerInfo
©©' 1
)
©©1 2
;
©©2 3
}
ªª 
}
«« 
catch
¬¬ 
(
¬¬ 
EntityException
¬¬ &
ex
¬¬' )
)
¬¬) *
{
­­ 
Console
®® 
.
®® 
	WriteLine
®® %
(
®®% &
ex
®®& (
.
®®( )
Message
®®) 0
)
®®0 1
;
®®1 2
}
¯¯ 
catch
°° 
(
°° 
	Exception
°°  
ex
°°! #
)
°°# $
{
±± 
Console
²² 
.
²² 
	WriteLine
²² %
(
²²% &
ex
²²& (
.
²²( )
Message
²²) 0
)
²²0 1
;
²²1 2
}
³³ 
}
´´ 
return
µµ 

careerList
µµ 
;
µµ 
}
¶¶ 	
}
·· 
public
¼¼ 

partial
¼¼ 
class
¼¼ 
Implementations
¼¼ (
:
¼¼) *
IStudent
¼¼+ 3
{
½½ 
public
ÃÃ 
Domain
ÃÃ 
.
ÃÃ 
Student
ÃÃ  
GetStudentNameById
ÃÃ 0
(
ÃÃ0 1
string
ÃÃ1 7
	idStudent
ÃÃ8 A
)
ÃÃA B
{
ÄÄ 	
Domain
ÅÅ 
.
ÅÅ 
Student
ÅÅ 
student
ÅÅ "
=
ÅÅ# $
null
ÅÅ% )
;
ÅÅ) *
using
ÆÆ 
(
ÆÆ 
FEIDBEntities
ÆÆ  
context
ÆÆ! (
=
ÆÆ) *
new
ÆÆ+ .
FEIDBEntities
ÆÆ/ <
(
ÆÆ< =
)
ÆÆ= >
)
ÆÆ> ?
{
ÇÇ 
try
ÈÈ 
{
ÉÉ 
var
ÊÊ 
foundStudent
ÊÊ $
=
ÊÊ% &
context
ÊÊ' .
.
ÊÊ. /
Students
ÊÊ/ 7
.
ÊÊ7 8
Where
ÊÊ8 =
(
ÊÊ= >
x
ÊÊ> ?
=>
ÊÊ@ B
x
ÊÊC D
.
ÊÊD E
	IdStudent
ÊÊE N
==
ÊÊO Q
	idStudent
ÊÊR [
)
ÊÊ[ \
.
ÊÊ\ ]
FirstOrDefault
ÊÊ] k
(
ÊÊk l
)
ÊÊl m
;
ÊÊm n
student
ËË 
=
ËË 
new
ËË !
Domain
ËË" (
.
ËË( )
Student
ËË) 0
(
ËË0 1
)
ËË1 2
{
ÌÌ 
	idStudent
ÍÍ !
=
ÍÍ" #
	idStudent
ÍÍ$ -
,
ÍÍ- .
	matricula
ÎÎ !
=
ÎÎ" #
foundStudent
ÎÎ$ 0
.
ÎÎ0 1
	Matricula
ÎÎ1 :
,
ÎÎ: ;
fullName
ÏÏ  
=
ÏÏ! "
foundStudent
ÏÏ# /
.
ÏÏ/ 0
FullName
ÏÏ0 8
,
ÏÏ8 9
}
ÑÑ 
;
ÑÑ 
}
ÓÓ 
catch
ÔÔ 
(
ÔÔ 
EntityException
ÔÔ &
ex
ÔÔ' )
)
ÔÔ) *
{
ÕÕ 
Console
ÖÖ 
.
ÖÖ 
	WriteLine
ÖÖ %
(
ÖÖ% &
ex
ÖÖ& (
.
ÖÖ( )
Message
ÖÖ) 0
)
ÖÖ0 1
;
ÖÖ1 2
}
×× 
catch
ØØ 
(
ØØ 
	Exception
ØØ  
ex
ØØ! #
)
ØØ# $
{
ÙÙ 
Console
ÚÚ 
.
ÚÚ 
	WriteLine
ÚÚ %
(
ÚÚ% &
ex
ÚÚ& (
.
ÚÚ( )
Message
ÚÚ) 0
)
ÚÚ0 1
;
ÚÚ1 2
}
ÛÛ 
}
İİ 
return
ŞŞ 
student
ŞŞ 
;
ŞŞ 
}
ßß 	
public
ææ 
bool
ææ 
RegisterStudent
ææ #
(
ææ# $
Domain
ææ$ *
.
ææ* +
ViewStudentInfo
ææ+ :
student
ææ; B
)
ææB C
{
çç 	
bool
èè 
isSuccessful
èè 
=
èè 
false
èè  %
;
èè% &
if
êê 
(
êê 
student
êê 
!=
êê 
null
êê 
)
êê  
{
ëë 
using
ìì 
(
ìì 
FEIDBEntities
ìì $
context
ìì% ,
=
ìì- .
new
ìì/ 2
FEIDBEntities
ìì3 @
(
ìì@ A
)
ììA B
)
ììB C
{
íí 
using
îî 
(
îî 
var
îî "
dbContextTransaction
îî 3
=
îî4 5
context
îî6 =
.
îî= >
Database
îî> F
.
îîF G
BeginTransaction
îîG W
(
îîW X
)
îîX Y
)
îîY Z
{
ïï 
try
ğğ 
{
ññ 
var
òò 
newUser
òò  '
=
òò( )
new
òò* -

DataAccess
òò. 8
.
òò8 9
User
òò9 =
(
òò= >
)
òò> ?
{
óó 
Password
ôô  (
=
ôô) *
student
ôô+ 2
.
ôô2 3
password
ôô3 ;
}
õõ 
;
õõ 
context
÷÷ #
.
÷÷# $
Users
÷÷$ )
.
÷÷) *
Add
÷÷* -
(
÷÷- .
newUser
÷÷. 5
)
÷÷5 6
;
÷÷6 7
context
øø #
.
øø# $
SaveChanges
øø$ /
(
øø/ 0
)
øø0 1
;
øø1 2
var
ùù 

newStudent
ùù  *
=
ùù+ ,
new
ùù- 0

DataAccess
ùù1 ;
.
ùù; <
Student
ùù< C
(
ùùC D
)
ùùD E
{
úú 
	Matricula
ûû  )
=
ûû* +
student
ûû, 3
.
ûû3 4
	idStudent
ûû4 =
,
ûû= >
FullName
üü  (
=
üü) *
student
üü+ 2
.
üü2 3
fullName
üü3 ;
,
üü; <
Tutor_IdTutor
ıı  -
=
ıı. /
student
ıı0 7
.
ıı7 8
idTutor
ıı8 ?
,
ıı? @
Career_IdCareer
şş  /
=
şş0 1
student
şş2 9
.
şş9 :
idCareer
şş: B
,
şşB C
User_IdUser
ÿÿ  +
=
ÿÿ, -
newUser
ÿÿ. 5
.
ÿÿ5 6
IdUser
ÿÿ6 <
,
ÿÿ< =
	IdStudent
€€  )
=
€€* +
student
€€, 3
.
€€3 4
	idStudent
€€4 =
,
€€= >
}
 
;
 
var
ƒƒ 
existingStudent
ƒƒ  /
=
ƒƒ0 1
context
ƒƒ2 9
.
ƒƒ9 :
Students
ƒƒ: B
.
ƒƒB C
FirstOrDefault
ƒƒC Q
(
ƒƒQ R
s
ƒƒR S
=>
ƒƒT V
s
ƒƒW X
.
ƒƒX Y
	IdStudent
ƒƒY b
==
ƒƒc e

newStudent
ƒƒf p
.
ƒƒp q
	IdStudent
ƒƒq z
)
ƒƒz {
;
ƒƒ{ |
if
„„ 
(
„„  
existingStudent
„„  /
!=
„„0 2
null
„„3 7
)
„„7 8
{
…… 
throw
††  %
new
††& )#
ArgumentNullException
††* ?
(
††? @
$str
††@ i
)
††i j
;
††j k
}
‡‡ 
context
‰‰ #
.
‰‰# $
Students
‰‰$ ,
.
‰‰, -
Add
‰‰- 0
(
‰‰0 1

newStudent
‰‰1 ;
)
‰‰; <
;
‰‰< =
context
ŠŠ #
.
ŠŠ# $
SaveChanges
ŠŠ$ /
(
ŠŠ/ 0
)
ŠŠ0 1
;
ŠŠ1 2"
dbContextTransaction
ŒŒ 0
.
ŒŒ0 1
Commit
ŒŒ1 7
(
ŒŒ7 8
)
ŒŒ8 9
;
ŒŒ9 :
isSuccessful
 (
=
) *
true
+ /
;
/ 0
}
 
catch
 
(
 )
DbEntityValidationException
 :
ex
; =
)
= >
{
 "
dbContextTransaction
‘‘ 0
.
‘‘0 1
Rollback
‘‘1 9
(
‘‘9 :
)
‘‘: ;
;
‘‘; <
foreach
’’ #
(
’’$ %
var
’’% (
validationErrors
’’) 9
in
’’: <
ex
’’= ?
.
’’? @$
EntityValidationErrors
’’@ V
)
’’V W
{
““ 
foreach
””  '
(
””( )
var
””) ,
validationError
””- <
in
””= ?
validationErrors
””@ P
.
””P Q
ValidationErrors
””Q a
)
””a b
{
••  !
Console
––$ +
.
––+ ,
	WriteLine
––, 5
(
––5 6
$"
––6 8
$str
––8 B
{
––B C
validationError
––C R
.
––R S
PropertyName
––S _
}
––_ `
$str
––` h
{
––h i
validationError
––i x
.
––x y
ErrorMessage––y …
}––… †
"––† ‡
)––‡ ˆ
;––ˆ ‰
}
——  !
}
˜˜ 
}
™™ 
catch
šš 
(
šš 
	Exception
šš (
ex
šš) +
)
šš+ ,
{
›› "
dbContextTransaction
œœ 0
.
œœ0 1
Rollback
œœ1 9
(
œœ9 :
)
œœ: ;
;
œœ; <
Console
 #
.
# $
	WriteLine
$ -
(
- .
ex
. 0
.
0 1
Message
1 8
)
8 9
;
9 :
}
 
}
ŸŸ 
}
   
}
¡¡ 
return
££ 
isSuccessful
££ 
;
££  
}
¤¤ 	
}
¥¥ 
[
ªª 
ServiceBehavior
ªª 
(
ªª 
ConcurrencyMode
ªª $
=
ªª% &
ConcurrencyMode
ªª' 6
.
ªª6 7
	Reentrant
ªª7 @
)
ªª@ A
]
ªªA B
public
«« 

partial
«« 
class
«« 
Implementations
«« (
:
««) *
IAppointment
««+ 7
{
¬¬ 
private
­­ 
static
­­ 
readonly
­­ 

Dictionary
­­  *
<
­­* +
string
­­+ 1
,
­­1 2$
StudentCallbackChanels
­­3 I
>
­­I J
studentList
­­K V
=
­­W X
new
­­Y \

Dictionary
­­] g
<
­­g h
string
­­h n
,
­­n o%
StudentCallbackChanels­­p †
>­­† ‡
(­­‡ ˆ
)­­ˆ ‰
;­­‰ Š
private
®® 
static
®® 
readonly
®® 
List
®®  $
<
®®$ %
Domain
®®% +
.
®®+ ,
Appointment
®®, 7
>
®®7 8
appointmentList
®®9 H
=
®®I J
new
®®K N
List
®®O S
<
®®S T
Domain
®®T Z
.
®®Z [
Appointment
®®[ f
>
®®f g
(
®®g h
)
®®h i
;
®®i j
private
¯¯ 
static
¯¯ 
System
¯¯ 
.
¯¯ 
	Threading
¯¯ '
.
¯¯' (
Timer
¯¯( -
timer
¯¯. 3
;
¯¯3 4
private
°° 
static
°° 
DateTime
°° 
	startTime
°°  )
;
°°) *
private
±± 
static
±± 
bool
±± 
isTimerStoped
±± )
=
±±* +
false
±±, 1
;
±±1 2
public
·· 
Implementations
·· 
(
·· 
)
··  
{
¸¸ 	
timer
¹¹ 
=
¹¹ 
new
¹¹ 
System
¹¹ 
.
¹¹ 
	Threading
¹¹ (
.
¹¹( )
Timer
¹¹) .
(
¹¹. /
TimerElapsed
¹¹/ ;
,
¹¹; <
null
¹¹= A
,
¹¹A B
Timeout
¹¹C J
.
¹¹J K
Infinite
¹¹K S
,
¹¹S T
$num
¹¹U Y
)
¹¹Y Z
;
¹¹Z [
}
ºº 	
private
¿¿ 
static
¿¿ 
void
¿¿ 

StartTimer
¿¿ &
(
¿¿& '
)
¿¿' (
{
ÀÀ 	
	startTime
ÁÁ 
=
ÁÁ 
DateTime
ÁÁ  
.
ÁÁ  !
Now
ÁÁ! $
;
ÁÁ$ %
timer
ÂÂ 
.
ÂÂ 
Change
ÂÂ 
(
ÂÂ 
$num
ÂÂ 
,
ÂÂ 
$num
ÂÂ  
)
ÂÂ  !
;
ÂÂ! "
}
ÃÃ 	
private
ÈÈ 
static
ÈÈ 
void
ÈÈ 
	StopTimer
ÈÈ %
(
ÈÈ% &
)
ÈÈ& '
{
ÉÉ 	
timer
ÊÊ 
.
ÊÊ 
Change
ÊÊ 
(
ÊÊ 
Timeout
ÊÊ  
.
ÊÊ  !
Infinite
ÊÊ! )
,
ÊÊ) *
$num
ÊÊ+ /
)
ÊÊ/ 0
;
ÊÊ0 1
}
ËË 	
private
ĞĞ 
static
ĞĞ 
void
ĞĞ 
TimerElapsed
ĞĞ (
(
ĞĞ( )
object
ĞĞ) /
state
ĞĞ0 5
)
ĞĞ5 6
{
ÑÑ 	
if
ÒÒ 
(
ÒÒ 
!
ÒÒ 
isTimerStoped
ÒÒ 
)
ÒÒ 
{
ÓÓ 
var
ÔÔ 
elapsedTime
ÔÔ 
=
ÔÔ  !
DateTime
ÔÔ" *
.
ÔÔ* +
Now
ÔÔ+ .
-
ÔÔ/ 0
	startTime
ÔÔ1 :
;
ÔÔ: ;
try
ÕÕ 
{
ÖÖ 
foreach
×× 
(
×× 
var
××  
student
××! (
in
××) +
studentList
××, 7
.
××7 8
Values
××8 >
)
××> ?
{
ØØ 
student
ÙÙ 
.
ÙÙ  !
appointmentCallback
ÙÙ  3
.
ÙÙ3 4
UpdateTimer
ÙÙ4 ?
(
ÙÙ? @
elapsedTime
ÙÙ@ K
)
ÙÙK L
;
ÙÙL M
}
ÚÚ 
}
ÛÛ 
catch
ÛÛ 
(
ÛÛ 
	Exception
ÛÛ  
ex
ÛÛ! #
)
ÛÛ# $
{
ÜÜ 
Console
İİ 
.
İİ 
	WriteLine
İİ %
(
İİ% &
ex
İİ& (
.
İİ( )
ToString
İİ) 1
(
İİ1 2
)
İİ2 3
)
İİ3 4
;
İİ4 5
}
ŞŞ 
}
àà 
}
áá 	
private
ææ 
void
ææ 
NotifyClients
ææ "
(
ææ" #
)
ææ# $
{
çç 	
var
èè 
students
èè 
=
èè 
studentList
èè &
.
èè& '
Select
èè' -
(
èè- .
x
èè. /
=>
èè0 2
x
èè3 4
.
èè4 5
Key
èè5 8
)
èè8 9
.
èè9 :
ToList
èè: @
(
èè@ A
)
èèA B
;
èèB C
foreach
éé 
(
éé 
var
éé 
student
éé  
in
éé! #
students
éé$ ,
)
éé, -
{
êê 
studentList
ëë 
[
ëë 
student
ëë #
]
ëë# $
.
ëë$ %!
appointmentCallback
ëë% 8
.
ëë8 9
SetAppointments
ëë9 H
(
ëëH I
appointmentList
ëëI X
)
ëëX Y
;
ëëY Z
}
ìì 
}
íí 	
public
óó 
void
óó  
AppointmentRequest
óó &
(
óó& '
Domain
óó' -
.
óó- .
Appointment
óó. 9
newAppointment
óó: H
)
óóH I
{
ôô 	
if
õõ 
(
õõ 
appointmentList
õõ 
.
õõ  
FirstOrDefault
õõ  .
(
õõ. /
x
õõ/ 0
=>
õõ1 3
x
õõ4 5
.
õõ5 6
student_IdStudent
õõ6 G
==
õõH J
newAppointment
õõK Y
.
õõY Z
student_IdStudent
õõZ k
)
õõk l
==
õõm o
null
õõp t
)
õõt u
{
öö 
using
÷÷ 
(
÷÷ 
FEIDBEntities
÷÷ $
context
÷÷% ,
=
÷÷- .
new
÷÷/ 2
FEIDBEntities
÷÷3 @
(
÷÷@ A
)
÷÷A B
)
÷÷B C
{
øø 
try
ùù 
{
úú 
appointmentList
ûû '
.
ûû' (
Add
ûû( +
(
ûû+ ,
newAppointment
ûû, :
)
ûû: ;
;
ûû; <
int
üü 
status
üü "
=
üü# $
	Constants
üü% .
.
üü. /
Pending
üü/ 6
;
üü6 7
if
ıı 
(
ıı 
appointmentList
ıı +
.
ıı+ ,
Count
ıı, 1
==
ıı2 4
$num
ıı5 6
)
ıı6 7
{
şş 
status
ÿÿ "
=
ÿÿ# $
	Constants
ÿÿ% .
.
ÿÿ. /

InProgress
ÿÿ/ 9
;
ÿÿ9 :
appointmentList
€€ +
.
€€+ ,
Remove
€€, 2
(
€€2 3
newAppointment
€€3 A
)
€€A B
;
€€B C
}
 
var
‚‚ 
newAppointmentAux
‚‚ -
=
‚‚. /
new
‚‚0 3

DataAccess
‚‚4 >
.
‚‚> ?
Appointment
‚‚? J
(
‚‚J K
)
‚‚K L
{
ƒƒ 
AttendedDate
…… (
=
……) *
DateTime
……+ 3
.
……3 4
Now
……4 7
,
……7 8
Duration
†† $
=
††% &
$num
††' (
,
††( )
Status
‡‡ "
=
‡‡# $
(
‡‡% &
short
‡‡& +
)
‡‡+ ,
status
‡‡, 2
,
‡‡2 3
Student_IdStudent
ˆˆ -
=
ˆˆ. /
newAppointment
ˆˆ0 >
.
ˆˆ> ?
student_IdStudent
ˆˆ? P
,
ˆˆP Q#
Procedure_IdProcedure
‰‰ 1
=
‰‰2 3
newAppointment
‰‰4 B
.
‰‰B C#
procedure_IdProcedure
‰‰C X
,
‰‰X Y
NotAttendedReason
ŠŠ -
=
ŠŠ. /
$str
ŠŠ0 2
,
ŠŠ2 3
}
‹‹ 
;
‹‹ 
context
 
.
  
Appointments
  ,
.
, -
Add
- 0
(
0 1
newAppointmentAux
1 B
)
B C
;
C D
context
 
.
  
SaveChanges
  +
(
+ ,
)
, -
;
- .
newAppointment
 &
.
& '
idAppointment
' 4
=
5 6
newAppointmentAux
7 H
.
H I
IdAppointment
I V
;
V W
}
 
catch
‘‘ 
(
‘‘ )
DbEntityValidationException
‘‘ 6
ex
‘‘7 9
)
‘‘9 :
{
’’ 
foreach
““ 
(
““  !
var
““! $$
entityValidationErrors
““% ;
in
““< >
ex
““? A
.
““A B$
EntityValidationErrors
““B X
)
““X Y
{
”” 
foreach
•• #
(
••$ %
var
••% (
validationError
••) 8
in
••9 ;$
entityValidationErrors
••< R
.
••R S
ValidationErrors
••S c
)
••c d
{
–– 
Console
——  '
.
——' (
	WriteLine
——( 1
(
——1 2
$"
——2 4
$str
——4 >
{
——> ?
validationError
——? N
.
——N O
PropertyName
——O [
}
——[ \
$str
——\ e
{
——e f
validationError
——f u
.
——u v
ErrorMessage——v ‚
}——‚ ƒ
"——ƒ „
)——„ …
;——… †
}
˜˜ 
}
™™ 
}
šš 
catch
›› 
(
›› 
	Exception
›› $
ex
››% '
)
››' (
{
œœ 
Console
 
.
  
	WriteLine
  )
(
) *
$"
* ,
$str
, R
{
R S
ex
S U
.
U V
Message
V ]
}
] ^
"
^ _
)
_ `
;
` a
}
 
}
ŸŸ 
if
¡¡ 
(
¡¡ 
appointmentList
¡¡ #
.
¡¡# $
Count
¡¡$ )
==
¡¡* ,
$num
¡¡- .
)
¡¡. /
{
¢¢ 
isTimerStoped
££ !
=
££" #
false
££$ )
;
££) *

StartTimer
¤¤ 
(
¤¤ 
)
¤¤  
;
¤¤  !
}
¥¥ 
appointmentList
¦¦ 
.
¦¦  
Add
¦¦  #
(
¦¦# $
newAppointment
¦¦$ 2
)
¦¦2 3
;
¦¦3 4
}
¨¨ 
NotifyClients
©© 
(
©© 
)
©© 
;
©© 
}
ªª 	
public
°° 
List
°° 
<
°° 
Domain
°° 
.
°° 
Appointment
°° &
>
°°& ' 
GetAllAppointments
°°( :
(
°°: ;
)
°°; <
{
±± 	
return
²² 
appointmentList
²² "
;
²²" #
}
³³ 	
public
ºº 
void
ºº 
LeaveAppointment
ºº $
(
ºº$ %
string
ºº% +
	studentId
ºº, 5
,
ºº5 6
string
ºº7 =
reason
ºº> D
)
ººD E
{
»» 	
var
¼¼ !
appointmentToRemove
¼¼ #
=
¼¼$ %
appointmentList
¼¼& 5
.
¼¼5 6
FirstOrDefault
¼¼6 D
(
¼¼D E
x
¼¼E F
=>
¼¼G I
x
¼¼J K
.
¼¼K L
student_IdStudent
¼¼L ]
==
¼¼^ `
	studentId
¼¼a j
)
¼¼j k
;
¼¼k l
if
¾¾ 
(
¾¾ !
appointmentToRemove
¾¾ #
!=
¾¾$ &
null
¾¾' +
)
¾¾+ ,
{
¿¿ 
var
ÀÀ !
wasFirstAppointment
ÀÀ '
=
ÀÀ( )
(
ÀÀ* +!
appointmentToRemove
ÀÀ+ >
==
ÀÀ? A
appointmentList
ÀÀB Q
.
ÀÀQ R
First
ÀÀR W
(
ÀÀW X
)
ÀÀX Y
)
ÀÀY Z
;
ÀÀZ [
int
ÁÁ 
status
ÁÁ 
=
ÁÁ 
	Constants
ÁÁ &
.
ÁÁ& '
Pending
ÁÁ' .
;
ÁÁ. /
appointmentList
ÂÂ 
.
ÂÂ  
Remove
ÂÂ  &
(
ÂÂ& '!
appointmentToRemove
ÂÂ' :
)
ÂÂ: ;
;
ÂÂ; <
if
ÃÃ 
(
ÃÃ 
appointmentList
ÃÃ #
.
ÃÃ# $
Count
ÃÃ$ )
==
ÃÃ* ,
$num
ÃÃ- .
)
ÃÃ. /
{
ÄÄ 
status
ÅÅ 
=
ÅÅ 
	Constants
ÅÅ &
.
ÅÅ& '

InProgress
ÅÅ' 1
;
ÅÅ1 2
}
ÆÆ 
using
ÇÇ 
(
ÇÇ 
FEIDBEntities
ÇÇ $
context
ÇÇ% ,
=
ÇÇ- .
new
ÇÇ/ 2
FEIDBEntities
ÇÇ3 @
(
ÇÇ@ A
)
ÇÇA B
)
ÇÇB C
{
ÈÈ 
try
ÉÉ 
{
ÊÊ 
var
ËË !
existingAppointment
ËË /
=
ËË0 1
context
ËË2 9
.
ËË9 :
Appointments
ËË: F
.
ÌÌ) *
Where
ÌÌ* /
(
ÌÌ/ 0
a
ÌÌ0 1
=>
ÌÌ2 4
a
ÌÌ5 6
.
ÌÌ6 7
Student_IdStudent
ÌÌ7 H
==
ÌÌI K
	studentId
ÌÌL U
&&
ÌÌV X
a
ÌÌY Z
.
ÌÌZ [
Status
ÌÌ[ a
==
ÌÌb d
status
ÌÌe k
)
ÌÌk l
.
ÍÍ) *
OrderByDescending
ÍÍ* ;
(
ÍÍ; <
a
ÍÍ< =
=>
ÍÍ> @
a
ÍÍA B
.
ÍÍB C
IdAppointment
ÍÍC P
)
ÍÍP Q
.
ÎÎ) *
FirstOrDefault
ÎÎ* 8
(
ÎÎ8 9
)
ÎÎ9 :
;
ÎÎ: ;
if
ĞĞ 
(
ĞĞ !
existingAppointment
ĞĞ /
!=
ĞĞ0 2
null
ĞĞ3 7
)
ĞĞ7 8
{
ÑÑ 
if
ÒÒ 
(
ÒÒ !
existingAppointment
ÒÒ 2
.
ÒÒ2 3
Status
ÒÒ3 9
==
ÒÒ9 ;
	Constants
ÒÒ< E
.
ÒÒE F

InProgress
ÒÒF P
)
ÒÒP Q
{
ÓÓ 
var
ÔÔ  #
elapsedTime
ÔÔ$ /
=
ÔÔ0 1
DateTime
ÔÔ2 :
.
ÔÔ: ;
Now
ÔÔ; >
-
ÔÔ? @
	startTime
ÔÔA J
;
ÔÔJ K!
existingAppointment
ÕÕ  3
.
ÕÕ3 4
Duration
ÕÕ4 <
=
ÕÕ= >
(
ÕÕ? @
int
ÕÕ@ C
)
ÕÕC D
elapsedTime
ÕÕD O
.
ÕÕO P
TotalSeconds
ÕÕP \
;
ÕÕ\ ]
}
ÖÖ !
existingAppointment
×× /
.
××/ 0
Status
××0 6
=
××7 8
(
××9 :
short
××: ?
)
××? @
	Constants
××@ I
.
××I J
CanceledByStudent
××J [
;
××[ \!
existingAppointment
ØØ /
.
ØØ/ 0
NotAttendedReason
ØØ0 A
=
ØØB C
reason
ØØD J
;
ØØJ K
context
ÙÙ #
.
ÙÙ# $
SaveChanges
ÙÙ$ /
(
ÙÙ/ 0
)
ÙÙ0 1
;
ÙÙ1 2
}
ÚÚ 
else
ÛÛ 
{
ÜÜ 
Console
İİ #
.
İİ# $
	WriteLine
İİ$ -
(
İİ- .
$"
İİ. 0
$str
İİ0 d
{
İİd e
	studentId
İİe n
}
İİn o
$str
İİo p
"
İİp q
)
İİq r
;
İİr s
}
ŞŞ 
}
ßß 
catch
àà 
(
àà )
DbEntityValidationException
àà 6
ex
àà7 9
)
àà9 :
{
áá 
foreach
ââ 
(
ââ  !
var
ââ! $$
entityValidationErrors
ââ% ;
in
ââ< >
ex
ââ? A
.
ââA B$
EntityValidationErrors
ââB X
)
ââX Y
{
ãã 
foreach
ää #
(
ää$ %
var
ää% (
validationError
ää) 8
in
ää9 ;$
entityValidationErrors
ää< R
.
ääR S
ValidationErrors
ääS c
)
ääc d
{
åå 
Console
ææ  '
.
ææ' (
	WriteLine
ææ( 1
(
ææ1 2
$"
ææ2 4
$str
ææ4 >
{
ææ> ?
validationError
ææ? N
.
ææN O
PropertyName
ææO [
}
ææ[ \
$str
ææ\ e
{
ææe f
validationError
ææf u
.
ææu v
ErrorMessageææv ‚
}ææ‚ ƒ
"ææƒ „
)ææ„ …
;ææ… †
}
çç 
}
èè 
}
éé 
catch
êê 
(
êê 
	Exception
êê $
ex
êê% '
)
êê' (
{
ëë 
Console
ìì 
.
ìì  
	WriteLine
ìì  )
(
ìì) *
$"
ìì* ,
$str
ìì, R
{
ììR S
ex
ììS U
.
ììU V
Message
ììV ]
}
ìì] ^
"
ìì^ _
)
ìì_ `
;
ìì` a
}
íí 
}
îî 
if
ğğ 
(
ğğ 
appointmentList
ğğ #
.
ğğ# $
Count
ğğ$ )
==
ğğ* ,
$num
ğğ- .
)
ğğ. /
{
ññ 
Console
òò 
.
òò 
	WriteLine
òò %
(
òò% &
$str
òò& ,
)
òò, -
;
òò- .
isTimerStoped
óó !
=
óó" #
true
óó$ (
;
óó( )
	StopTimer
ôô 
(
ôô 
)
ôô 
;
ôô  
}
öö 
else
÷÷ 
if
÷÷ 
(
÷÷ !
wasFirstAppointment
÷÷ ,
)
÷÷, -
{
øø 

StartTimer
ùù 
(
ùù 
)
ùù  
;
ùù  !
}
úú 
}
ûû 
NotifyClients
üü 
(
üü 
)
üü 
;
üü 
}
ıı 	
void
ƒƒ 
IAppointment
ƒƒ 
.
ƒƒ 
JoinToSesion
ƒƒ &
(
ƒƒ& '
string
ƒƒ' -
	idStudent
ƒƒ. 7
)
ƒƒ7 8
{
„„ 	$
StudentCallbackChanels
…… "$
studentCallbackChanels
……# 9
=
……: ;
new
……< ?$
StudentCallbackChanels
……@ V
(
……V W
)
……W X
{
†† !
appointmentCallback
‡‡ #
=
‡‡$ %
OperationContext
‡‡& 6
.
‡‡6 7
Current
‡‡7 >
.
‡‡> ? 
GetCallbackChannel
‡‡? Q
<
‡‡Q R"
IAppointmentCallback
‡‡R f
>
‡‡f g
(
‡‡g h
)
‡‡h i
}
ˆˆ 
;
ˆˆ 
if
‰‰ 
(
‰‰ 
!
‰‰ 
studentList
‰‰ 
.
‰‰ 
ContainsKey
‰‰ (
(
‰‰( )
	idStudent
‰‰) 2
)
‰‰2 3
)
‰‰3 4
{
ŠŠ 
studentList
‹‹ 
.
‹‹ 
Add
‹‹ 
(
‹‹  
	idStudent
‹‹  )
,
‹‹) *$
studentCallbackChanels
‹‹+ A
)
‹‹A B
;
‹‹B C
}
ŒŒ 
else
 
{
 
studentList
 
[
 
	idStudent
 %
]
% &
=
' ($
studentCallbackChanels
) ?
;
? @
}
 
}
‘‘ 	
public
˜˜ 
void
˜˜ 
CancelAppointment
˜˜ %
(
˜˜% &
int
˜˜& )
idAppointment
˜˜* 7
,
˜˜7 8
string
˜˜9 ?
reason
˜˜@ F
)
˜˜F G
{
™™ 	
var
šš !
appointmentToRemove
šš #
=
šš$ %
appointmentList
šš& 5
.
šš5 6
FirstOrDefault
šš6 D
(
ššD E
x
ššE F
=>
ššG I
x
ššJ K
.
ššK L
idAppointment
ššL Y
==
ššZ \
idAppointment
šš] j
)
ššj k
;
ššk l
if
œœ 
(
œœ !
appointmentToRemove
œœ #
!=
œœ$ &
null
œœ' +
)
œœ+ ,
{
 
if
 
(
 
studentList
 
.
  
ContainsKey
  +
(
+ ,!
appointmentToRemove
, ?
.
? @
student_IdStudent
@ Q
)
Q R
)
R S
{
ŸŸ 
studentList
   
[
    !
appointmentToRemove
    3
.
  3 4
student_IdStudent
  4 E
]
  E F
.
  F G!
appointmentCallback
  G Z
.
  Z [ 
NotifyCancellation
  [ m
(
  m n
reason
  n t
)
  t u
;
  u v
}
¡¡ 
appointmentList
¢¢ 
.
¢¢  
Remove
¢¢  &
(
¢¢& '!
appointmentToRemove
¢¢' :
)
¢¢: ;
;
¢¢; <
}
¤¤ 
using
¥¥ 
(
¥¥ 
FEIDBEntities
¥¥  
context
¥¥! (
=
¥¥) *
new
¥¥+ .
FEIDBEntities
¥¥/ <
(
¥¥< =
)
¥¥= >
)
¥¥> ?
{
¦¦ 
try
§§ 
{
¨¨ 
var
©© !
existingAppointment
©© +
=
©©, -
context
©©. 5
.
©©5 6
Appointments
©©6 B
.
ªª% &
Where
ªª& +
(
ªª+ ,
x
ªª, -
=>
ªª. 0
x
ªª1 2
.
ªª2 3
IdAppointment
ªª3 @
==
ªªA C
idAppointment
ªªD Q
)
ªªQ R
.
ªªR S
FirstOrDefault
ªªS a
(
ªªa b
)
ªªb c
;
ªªc d
if
¬¬ 
(
¬¬ !
existingAppointment
¬¬ +
!=
¬¬, .
null
¬¬/ 3
)
¬¬3 4
{
­­ !
existingAppointment
®® +
.
®®+ ,
Duration
®®, 4
=
®®5 6
$num
®®7 8
;
®®8 9!
existingAppointment
¯¯ +
.
¯¯+ ,
Status
¯¯, 2
=
¯¯3 4
(
¯¯5 6
short
¯¯6 ;
)
¯¯; <
	Constants
¯¯< E
.
¯¯E F!
CanceledBySecretary
¯¯F Y
;
¯¯Y Z!
existingAppointment
°° +
.
°°+ ,
NotAttendedReason
°°, =
=
°°> ?
reason
°°@ F
;
°°F G
context
±± 
.
±±  
SaveChanges
±±  +
(
±±+ ,
)
±±, -
;
±±- .
}
²² 
else
³³ 
{
´´ 
Console
µµ 
.
µµ  
	WriteLine
µµ  )
(
µµ) *
$"
µµ* ,
$str
µµ, [
{
µµ[ \
idAppointment
µµ\ i
}
µµi j
$str
µµj k
"
µµk l
)
µµl m
;
µµm n
}
¶¶ 
}
·· 
catch
¸¸ 
(
¸¸ )
DbEntityValidationException
¸¸ 2
ex
¸¸3 5
)
¸¸5 6
{
¹¹ 
foreach
ºº 
(
ºº 
var
ºº  $
entityValidationErrors
ºº! 7
in
ºº8 :
ex
ºº; =
.
ºº= >$
EntityValidationErrors
ºº> T
)
ººT U
{
»» 
foreach
¼¼ 
(
¼¼  !
var
¼¼! $
validationError
¼¼% 4
in
¼¼5 7$
entityValidationErrors
¼¼8 N
.
¼¼N O
ValidationErrors
¼¼O _
)
¼¼_ `
{
½½ 
Console
¾¾ #
.
¾¾# $
	WriteLine
¾¾$ -
(
¾¾- .
$"
¾¾. 0
$str
¾¾0 :
{
¾¾: ;
validationError
¾¾; J
.
¾¾J K
PropertyName
¾¾K W
}
¾¾W X
$str
¾¾X a
{
¾¾a b
validationError
¾¾b q
.
¾¾q r
ErrorMessage
¾¾r ~
}
¾¾~ 
"¾¾ €
)¾¾€ 
;¾¾ ‚
}
¿¿ 
}
ÀÀ 
}
ÁÁ 
catch
ÂÂ 
(
ÂÂ 
	Exception
ÂÂ  
ex
ÂÂ! #
)
ÂÂ# $
{
ÃÃ 
Console
ÄÄ 
.
ÄÄ 
	WriteLine
ÄÄ %
(
ÄÄ% &
$"
ÄÄ& (
$str
ÄÄ( N
{
ÄÄN O
ex
ÄÄO Q
.
ÄÄQ R
Message
ÄÄR Y
}
ÄÄY Z
"
ÄÄZ [
)
ÄÄ[ \
;
ÄÄ\ ]
}
ÅÅ 
}
ÆÆ 
NotifyClients
ÇÇ 
(
ÇÇ 
)
ÇÇ 
;
ÇÇ 
}
ÈÈ 	
public
ÎÎ 
void
ÎÎ '
MarkAppointmentAsAttended
ÎÎ -
(
ÎÎ- .
int
ÎÎ. 1
idAppointment
ÎÎ2 ?
)
ÎÎ? @
{
ÏÏ 	
var
ĞĞ !
appointmentToRemove
ĞĞ #
=
ĞĞ$ %
appointmentList
ĞĞ& 5
.
ĞĞ5 6
FirstOrDefault
ĞĞ6 D
(
ĞĞD E
x
ĞĞE F
=>
ĞĞG I
x
ĞĞJ K
.
ĞĞK L
idAppointment
ĞĞL Y
==
ĞĞZ \
idAppointment
ĞĞ] j
)
ĞĞj k
;
ĞĞk l
if
ÑÑ 
(
ÑÑ !
appointmentToRemove
ÑÑ #
!=
ÑÑ$ &
null
ÑÑ' +
)
ÑÑ+ ,
{
ÒÒ 
appointmentList
ÓÓ 
.
ÓÓ  
Remove
ÓÓ  &
(
ÓÓ& '!
appointmentToRemove
ÓÓ' :
)
ÓÓ: ;
;
ÓÓ; <
}
ÕÕ 
using
ÖÖ 
(
ÖÖ 
FEIDBEntities
ÖÖ  
context
ÖÖ! (
=
ÖÖ) *
new
ÖÖ+ .
FEIDBEntities
ÖÖ/ <
(
ÖÖ< =
)
ÖÖ= >
)
ÖÖ> ?
{
×× 
try
ØØ 
{
ÙÙ 
var
ÚÚ !
existingAppointment
ÚÚ +
=
ÚÚ, -
context
ÚÚ. 5
.
ÚÚ5 6
Appointments
ÚÚ6 B
.
ÛÛ% &
Where
ÛÛ& +
(
ÛÛ+ ,
x
ÛÛ, -
=>
ÛÛ. 0
x
ÛÛ1 2
.
ÛÛ2 3
IdAppointment
ÛÛ3 @
==
ÛÛA C
idAppointment
ÛÛD Q
)
ÛÛQ R
.
ÛÛR S
FirstOrDefault
ÛÛS a
(
ÛÛa b
)
ÛÛb c
;
ÛÛc d
if
İİ 
(
İİ !
existingAppointment
İİ +
!=
İİ, .
null
İİ/ 3
)
İİ3 4
{
ŞŞ 
if
ßß 
(
ßß !
existingAppointment
ßß /
.
ßß/ 0
Status
ßß0 6
==
ßß7 9
	Constants
ßß: C
.
ßßC D

InProgress
ßßD N
)
ßßN O
{
àà 
var
áá 
elapsedTime
áá  +
=
áá, -
DateTime
áá. 6
.
áá6 7
Now
áá7 :
-
áá; <
	startTime
áá= F
;
ááF G!
existingAppointment
ââ /
.
ââ/ 0
Duration
ââ0 8
=
ââ9 :
(
ââ; <
int
ââ< ?
)
ââ? @
elapsedTime
ââ@ K
.
ââK L
TotalSeconds
ââL X
;
ââX Y
}
ãã !
existingAppointment
ää +
.
ää+ ,
Status
ää, 2
=
ää3 4
(
ää5 6
short
ää6 ;
)
ää; <
	Constants
ää< E
.
ääE F
Attended
ääF N
;
ääN O
context
åå 
.
åå  
SaveChanges
åå  +
(
åå+ ,
)
åå, -
;
åå- .
Console
ææ 
.
ææ  
	WriteLine
ææ  )
(
ææ) *
$"
ææ* ,
$str
ææ, P
{
ææP Q
idAppointment
ææQ ^
}
ææ^ _
$str
ææ_ ~
{
ææ~ "
existingAppointmentææ ’
.ææ’ “!
Student_IdStudentææ“ ¤
}ææ¤ ¥
$strææ¥ ¦
"ææ¦ §
)ææ§ ¨
;ææ¨ ©
}
èè 
else
éé 
{
êê 
Console
ëë 
.
ëë  
	WriteLine
ëë  )
(
ëë) *
$"
ëë* ,
$str
ëë, [
{
ëë[ \
idAppointment
ëë\ i
}
ëëi j
$str
ëëj k
"
ëëk l
)
ëël m
;
ëëm n
}
ìì 
}
íí 
catch
îî 
(
îî )
DbEntityValidationException
îî 2
ex
îî3 5
)
îî5 6
{
ïï 
foreach
ğğ 
(
ğğ 
var
ğğ  $
entityValidationErrors
ğğ! 7
in
ğğ8 :
ex
ğğ; =
.
ğğ= >$
EntityValidationErrors
ğğ> T
)
ğğT U
{
ññ 
foreach
òò 
(
òò  !
var
òò! $
validationError
òò% 4
in
òò5 7$
entityValidationErrors
òò8 N
.
òòN O
ValidationErrors
òòO _
)
òò_ `
{
óó 
Console
ôô #
.
ôô# $
	WriteLine
ôô$ -
(
ôô- .
$"
ôô. 0
$str
ôô0 :
{
ôô: ;
validationError
ôô; J
.
ôôJ K
PropertyName
ôôK W
}
ôôW X
$str
ôôX a
{
ôôa b
validationError
ôôb q
.
ôôq r
ErrorMessage
ôôr ~
}
ôô~ 
"ôô €
)ôô€ 
;ôô ‚
}
õõ 
}
öö 
}
÷÷ 
catch
øø 
(
øø 
	Exception
øø  
ex
øø! #
)
øø# $
{
ùù 
Console
úú 
.
úú 
	WriteLine
úú %
(
úú% &
$"
úú& (
$str
úú( N
{
úúN O
ex
úúO Q
.
úúQ R
Message
úúR Y
}
úúY Z
"
úúZ [
)
úú[ \
;
úú\ ]
}
ûû 
}
üü 
NotifyClients
şş 
(
şş 
)
şş 
;
şş 
}
ÿÿ 	
public
†† 
void
†† *
MarkAppointmentAsNotAttended
†† 0
(
††0 1
int
††1 4
idAppointment
††5 B
,
††B C
string
††D J
reason
††K Q
)
††Q R
{
‡‡ 	
var
ˆˆ !
appointmentToRemove
ˆˆ #
=
ˆˆ$ %
appointmentList
ˆˆ& 5
.
ˆˆ5 6
FirstOrDefault
ˆˆ6 D
(
ˆˆD E
x
ˆˆE F
=>
ˆˆG I
x
ˆˆJ K
.
ˆˆK L
idAppointment
ˆˆL Y
==
ˆˆZ \
idAppointment
ˆˆ] j
)
ˆˆj k
;
ˆˆk l
if
‰‰ 
(
‰‰ !
appointmentToRemove
‰‰ #
!=
‰‰$ &
null
‰‰' +
)
‰‰+ ,
{
ŠŠ 
appointmentList
‹‹ 
.
‹‹  
Remove
‹‹  &
(
‹‹& '!
appointmentToRemove
‹‹' :
)
‹‹: ;
;
‹‹; <
}
 
using
 
(
 
FEIDBEntities
  
context
! (
=
) *
new
+ .
FEIDBEntities
/ <
(
< =
)
= >
)
> ?
{
 
try
 
{
‘‘ 
var
’’ !
existingAppointment
’’ +
=
’’, -
context
’’. 5
.
’’5 6
Appointments
’’6 B
.
““% &
Where
““& +
(
““+ ,
x
““, -
=>
““. 0
x
““1 2
.
““2 3
IdAppointment
““3 @
==
““A C
idAppointment
““D Q
)
““Q R
.
““R S
FirstOrDefault
““S a
(
““a b
)
““b c
;
““c d
if
•• 
(
•• !
existingAppointment
•• +
!=
••, .
null
••/ 3
)
••3 4
{
–– !
existingAppointment
—— +
.
——+ ,
Duration
——, 4
=
——5 6
$num
——7 8
;
——8 9!
existingAppointment
˜˜ +
.
˜˜+ ,
Status
˜˜, 2
=
˜˜3 4
(
˜˜5 6
short
˜˜6 ;
)
˜˜; <
	Constants
˜˜< E
.
˜˜E F
NotAttended
˜˜F Q
;
˜˜Q R!
existingAppointment
™™ +
.
™™+ ,
NotAttendedReason
™™, =
=
™™> ?
reason
™™@ F
;
™™F G
context
šš 
.
šš  
SaveChanges
šš  +
(
šš+ ,
)
šš, -
;
šš- .
if
›› 
(
›› 
studentList
›› '
.
››' (
ContainsKey
››( 3
(
››3 4!
existingAppointment
››4 G
.
››G H
Student_IdStudent
››H Y
)
››Y Z
)
››Z [
{
œœ 
studentList
 '
[
' (!
existingAppointment
( ;
.
; <
Student_IdStudent
< M
]
M N
.
N O!
appointmentCallback
O b
.
b c 
NotifyCancellation
c u
(
u v
reason
v |
)
| }
;
} ~
}
 
}
ŸŸ 
else
   
{
¡¡ 
Console
¢¢ 
.
¢¢  
	WriteLine
¢¢  )
(
¢¢) *
$"
¢¢* ,
$str
¢¢, [
{
¢¢[ \
idAppointment
¢¢\ i
}
¢¢i j
$str
¢¢j k
"
¢¢k l
)
¢¢l m
;
¢¢m n
}
££ 
}
¤¤ 
catch
¥¥ 
(
¥¥ )
DbEntityValidationException
¥¥ 2
ex
¥¥3 5
)
¥¥5 6
{
¦¦ 
foreach
§§ 
(
§§ 
var
§§  $
entityValidationErrors
§§! 7
in
§§8 :
ex
§§; =
.
§§= >$
EntityValidationErrors
§§> T
)
§§T U
{
¨¨ 
foreach
©© 
(
©©  !
var
©©! $
validationError
©©% 4
in
©©5 7$
entityValidationErrors
©©8 N
.
©©N O
ValidationErrors
©©O _
)
©©_ `
{
ªª 
Console
«« #
.
««# $
	WriteLine
««$ -
(
««- .
$"
««. 0
$str
««0 :
{
««: ;
validationError
««; J
.
««J K
PropertyName
««K W
}
««W X
$str
««X a
{
««a b
validationError
««b q
.
««q r
ErrorMessage
««r ~
}
««~ 
"«« €
)««€ 
;«« ‚
}
¬¬ 
}
­­ 
}
®® 
catch
¯¯ 
(
¯¯ 
	Exception
¯¯  
ex
¯¯! #
)
¯¯# $
{
°° 
Console
±± 
.
±± 
	WriteLine
±± %
(
±±% &
$"
±±& (
$str
±±( N
{
±±N O
ex
±±O Q
.
±±Q R
Message
±±R Y
}
±±Y Z
"
±±Z [
)
±±[ \
;
±±\ ]
}
²² 
}
³³ 
NotifyClients
µµ 
(
µµ 
)
µµ 
;
µµ 
}
¶¶ 	
public
¼¼ 
List
¼¼ 
<
¼¼ 
Domain
¼¼ 
.
¼¼ %
ViewStudentsQueueReport
¼¼ 2
>
¼¼2 3$
GetStudentsQueueReport
¼¼4 J
(
¼¼J K
)
¼¼K L
{
½½ 	
List
¾¾ 
<
¾¾ 
Domain
¾¾ 
.
¾¾ %
ViewStudentsQueueReport
¾¾ /
>
¾¾/ 0
studentsReport
¾¾1 ?
=
¾¾@ A
new
¾¾B E
List
¾¾F J
<
¾¾J K
Domain
¾¾K Q
.
¾¾Q R%
ViewStudentsQueueReport
¾¾R i
>
¾¾i j
(
¾¾k l
)
¾¾l m
;
¾¾m n
using
¿¿ 
(
¿¿ 
FEIDBEntities
¿¿  
context
¿¿! (
=
¿¿) *
new
¿¿+ .
FEIDBEntities
¿¿/ <
(
¿¿< =
)
¿¿= >
)
¿¿> ?
{
ÀÀ 
try
ÁÁ 
{
ÂÂ 
var
ÄÄ 
studentsQueue
ÄÄ %
=
ÄÄ& '
context
ÄÄ( /
.
ÄÄ/ 0&
ViewStudentsQueueReports
ÄÄ0 H
.
ÅÅ 
Where
ÅÅ 
(
ÅÅ 
x
ÅÅ 
=>
ÅÅ 
x
ÅÅ  !
.
ÅÅ! "
Status
ÅÅ" (
==
ÅÅ( *
	Constants
ÅÅ+ 4
.
ÅÅ4 5
Pending
ÅÅ5 <
)
ÅÅ< =
.
ÆÆ 
ToList
ÆÆ 
(
ÆÆ 
)
ÆÆ 
;
ÆÆ 
foreach
ÈÈ 
(
ÈÈ 
var
ÈÈ  
student
ÈÈ! (
in
ÈÈ) +
studentsQueue
ÈÈ, 9
)
ÈÈ9 :
{
ÉÉ 
Domain
ÊÊ 
.
ÊÊ %
ViewStudentsQueueReport
ÊÊ 6

reportItem
ÊÊ7 A
=
ÊÊB C
new
ÊÊD G
Domain
ÊÊH N
.
ÊÊN O%
ViewStudentsQueueReport
ÊÊO f
(
ÊÊf g
)
ÊÊg h
{
ËË 
idAppointment
ÌÌ )
=
ÌÌ* +
student
ÌÌ, 3
.
ÌÌ3 4
IdAppointment
ÌÌ4 A
,
ÌÌA B
attendedDate
ÍÍ (
=
ÍÍ) *
student
ÍÍ+ 2
.
ÍÍ2 3
AttendedDate
ÍÍ3 ?
,
ÍÍ? @
status
ÎÎ "
=
ÎÎ# $
student
ÎÎ% ,
.
ÎÎ, -
Status
ÎÎ- 3
,
ÎÎ3 4
	idStudent
ÏÏ %
=
ÏÏ& '
student
ÏÏ( /
.
ÏÏ/ 0
	IdStudent
ÏÏ0 9
,
ÏÏ9 :
studentName
ĞĞ '
=
ĞĞ( )
student
ĞĞ* 1
.
ĞĞ1 2
FullName
ĞĞ2 :
,
ĞĞ: ;
}
ÑÑ 
;
ÑÑ 
studentsReport
ÒÒ &
.
ÒÒ& '
Add
ÒÒ' *
(
ÒÒ* +

reportItem
ÒÒ+ 5
)
ÒÒ5 6
;
ÒÒ6 7
}
ÓÓ 
}
ÕÕ 
catch
ÖÖ 
(
ÖÖ 
	Exception
ÖÖ  
ex
ÖÖ! #
)
ÖÖ# $
{
×× 
Console
ØØ 
.
ØØ 
	WriteLine
ØØ %
(
ØØ% &
ex
ØØ& (
.
ØØ( )
ToString
ØØ) 1
(
ØØ1 2
)
ØØ2 3
)
ØØ3 4
;
ØØ4 5
}
ÙÙ 
}
ÚÚ 
return
ÛÛ 
studentsReport
ÛÛ !
;
ÛÛ! "
}
ÜÜ 	
public
ãã 
List
ãã 
<
ãã 
Domain
ãã 
.
ãã 
ViewAppointment
ãã *
>
ãã* +(
GetAppointmentReportByDate
ãã, F
(
ããF G
DateTime
ããG O
date
ããP T
)
ããT U
{
ää 	
List
åå 
<
åå 
Domain
åå 
.
åå 
ViewAppointment
åå (
>
åå( )
report
åå* 0
=
åå1 2
new
åå3 6
List
åå7 ;
<
åå; <
Domain
åå< B
.
ååB C
ViewAppointment
ååC R
>
ååR S
(
ååT U
)
ååU V
;
ååV W
using
ææ 
(
ææ 
FEIDBEntities
ææ  
context
ææ! (
=
ææ) *
new
ææ+ .
FEIDBEntities
ææ/ <
(
ææ< =
)
ææ= >
)
ææ> ?
{
çç 
try
èè 
{
éé 
var
êê 
appointments
êê $
=
êê% &
context
êê' .
.
êê. /
ViewAppointments
êê/ ?
.
ëë$ %
Where
ëë% *
(
ëë* +
x
ëë+ ,
=>
ëë- /
DbFunctions
ëë0 ;
.
ëë; <
TruncateTime
ëë< H
(
ëëH I
x
ëëI J
.
ëëJ K
AttendedDate
ëëK W
)
ëëW X
==
ëëY [
date
ëë\ `
.
ëë` a
Date
ëëa e
)
ëëe f
.
ìì$ %
ToList
ìì% +
(
ìì+ ,
)
ìì, -
;
ìì- .
foreach
îî 
(
îî 
var
îî  
appointment
îî! ,
in
îî- /
appointments
îî0 <
)
îî< =
{
ïï 
ViewAppointment
ğğ '

reportItem
ğğ( 2
=
ğğ3 4
new
ğğ5 8
ViewAppointment
ğğ9 H
(
ğğH I
)
ğğI J
{
ññ 
idAppointment
òò )
=
òò* +
appointment
òò, 7
.
òò7 8
IdAppointment
òò8 E
,
òòE F
attendedDate
óó (
=
óó) *
appointment
óó+ 6
.
óó6 7
AttendedDate
óó7 C
,
óóC D
duration
ôô $
=
ôô% &
(
ôô' (
int
ôô( +
)
ôô+ ,
appointment
ôô, 7
.
ôô7 8
Duration
ôô8 @
,
ôô@ A
status
õõ "
=
õõ# $
appointment
õõ% 0
.
õõ0 1
Status
õõ1 7
,
õõ7 8
	idStudent
öö %
=
öö& '
appointment
öö( 3
.
öö3 4
	IdStudent
öö4 =
,
öö= >
fullName
÷÷ $
=
÷÷% &
appointment
÷÷' 2
.
÷÷2 3
FullName
÷÷3 ;
,
÷÷; <
	tutorName
øø %
=
øø& '
appointment
øø( 3
.
øø3 4
Name
øø4 8
,
øø8 9
idTutor
ùù #
=
ùù$ %
appointment
ùù& 1
.
ùù1 2
IdTutor
ùù2 9
,
ùù9 :
idProcedure
úú '
=
úú( )
appointment
úú* 5
.
úú5 6
IdProcedure
úú6 A
,
úúA B
procedureName
ûû )
=
ûû* +
appointment
ûû, 7
.
ûû7 8
Expr1
ûû8 =
,
ûû= >
}
üü 
;
üü 
report
ıı 
.
ıı 
Add
ıı "
(
ıı" #

reportItem
ıı# -
)
ıı- .
;
ıı. /
}
şş 
}
€€ 
catch
 
(
 
	Exception
  
ex
! #
)
# $
{
‚‚ 
Console
ƒƒ 
.
ƒƒ 
	WriteLine
ƒƒ %
(
ƒƒ% &
ex
ƒƒ& (
.
ƒƒ( )
ToString
ƒƒ) 1
(
ƒƒ1 2
)
ƒƒ2 3
)
ƒƒ3 4
;
ƒƒ4 5
}
„„ 
}
…… 
return
†† 
report
†† 
;
†† 
}
‡‡ 	
}
ˆˆ 
public
 

partial
 
class
 
Implementations
 (
:
) *

IProcedure
+ 5
{
 
public
 
List
 
<
 
Domain
 
.
 
	Procedure
 $
>
$ %
GetProcedureList
& 6
(
6 7
)
7 8
{
‘‘ 	
List
—— 
<
—— 
Domain
—— 
.
—— 
	Procedure
—— !
>
——! "
procedureList
——# 0
=
——1 2
new
——3 6
List
——7 ;
<
——; <
Domain
——< B
.
——B C
	Procedure
——C L
>
——L M
(
——M N
)
——N O
;
——O P
using
˜˜ 
(
˜˜ 
FEIDBEntities
˜˜  
context
˜˜! (
=
˜˜) *
new
˜˜+ .
FEIDBEntities
˜˜/ <
(
˜˜< =
)
˜˜= >
)
˜˜> ?
{
™™ 
try
šš 
{
›› 
var
œœ  
foundProcedureList
œœ *
=
œœ+ ,
context
œœ- 4
.
œœ4 5

Procedures
œœ5 ?
.
œœ? @
ToList
œœ@ F
(
œœF G
)
œœG H
;
œœH I
foreach
 
(
 
var
  
	procedure
! *
in
+ - 
foundProcedureList
. @
)
@ A
{
 
Domain
ŸŸ 
.
ŸŸ 
	Procedure
ŸŸ (
procedureInfo
ŸŸ) 6
=
ŸŸ7 8
new
ŸŸ9 <
Domain
ŸŸ= C
.
ŸŸC D
	Procedure
ŸŸD M
(
ŸŸM N
)
ŸŸN O
{
   
idProcedure
¢¢ '
=
¢¢( )
	procedure
¢¢* 3
.
¢¢3 4
IdProcedure
¢¢4 ?
,
¢¢? @
name
££  
=
££! "
	procedure
££# ,
.
££, -
Name
££- 1
}
¥¥ 
;
¥¥ 
procedureList
§§ %
.
§§% &
Add
§§& )
(
§§) *
procedureInfo
§§* 7
)
§§7 8
;
§§8 9
}
¨¨ 
}
©© 
catch
ªª 
(
ªª 
	Exception
ªª  
ex
ªª! #
)
ªª# $
{
«« 
Console
¬¬ 
.
¬¬ 
	WriteLine
¬¬ %
(
¬¬% &
$"
¬¬& (
{
¬¬( )
ex
¬¬) +
.
¬¬+ ,
Message
¬¬, 3
}
¬¬3 4
"
¬¬4 5
)
¬¬5 6
;
¬¬6 7
}
­­ 
}
®® 
return
¯¯ 
procedureList
¯¯  
;
¯¯  !
}
°° 	
}
±± 
}²² õ
>C:\Users\danse\source\repos\FEIService\FEIService\Constants.cs
	namespace 	

FEIService
 
{ 
public 

class 
	Constants 
{ 
public 
static 
int 
Pending !
=" #
$num$ %
;% &
public 
static 
int 
Attended "
=# $
$num% &
;& '
public 
static 
int 
CanceledByStudent +
=, -
$num. /
;/ 0
public 
static 
int 
CanceledBySecretary -
=. /
$num0 1
;1 2
public 
static 
int 

InProgress $
=% &
$num' (
;( )
public$$ 
static$$ 
int$$ 
NotAttended$$ %
=$$& '
$num$$( )
;$$) *
}%% 
}&& “
@C:\Users\danse\source\repos\FEIService\FEIService\Complements.cs
	namespace 	

FEIService
 
{		 
public 

class 
Complements 
{ 
public 
static 
string 
EncryptPassword ,
(, -
string- 3
password4 <
)< =
{ 	
using 
( 
SHA256 

sha256Hash $
=% &
SHA256' -
.- .
Create. 4
(4 5
)5 6
)6 7
{ 
byte 
[ 
] 
bytes 
= 

sha256Hash )
.) *
ComputeHash* 5
(5 6
Encoding6 >
.> ?
UTF8? C
.C D
GetBytesD L
(L M
passwordM U
)U V
)V W
;W X
var 
hash 
= 
new 
StringBuilder ,
(, -
)- .
;. /
for 
( 
int 
bit 
= 
$num  
;  !
bit" %
<& '
(( )
bytes) .
.. /
Length/ 5
)5 6
;6 7
bit8 ;
++; =
)= >
{ 
hash 
. 
Append 
(  
bytes  %
[% &
bit& )
]) *
.* +
ToString+ 3
(3 4
$str4 8
)8 9
)9 :
;: ;
}   
return!! 
hash!! 
.!! 
ToString!! $
(!!$ %
)!!% &
;!!& '
}"" 
}## 	
}$$ 
}%% 